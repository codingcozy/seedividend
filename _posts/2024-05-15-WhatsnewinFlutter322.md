---
title: "플러터 322에서 새로운 기능을 소개합니다"
description: ""
coverImage: "/assets/img/2024-05-15-WhatsnewinFlutter322_0.png"
date: 2024-05-15 10:49
ogImage: 
  url: /assets/img/2024-05-15-WhatsnewinFlutter322_0.png
tag: Tech
originalTitle: "What’s new in Flutter 3.22"
link: "https://medium.com/flutter/whats-new-in-flutter-3-22-fbde6c164fe3"
isUpdated: true
---




안녕하세요! 새로운 Flutter 안정 버전으로 다시 돌아왔습니다! 이번에는 Flutter 3.22를 소개해 드리게 되어 매우 기쁘게 생각합니다. 안정 채널에 WebAssembly를 도입하고, Android에서 Impeller용으로 완전히 강화된 Vulkan 백엔드를 제공하여 그래픽이 좀 더 부드럽고 성능이 크게 향상되었습니다. 또한, 새로운 위젯 상태 속성, 동적 뷰 크기 조정, 개선된 폼 유효성 검사를 통해 간편화된 작업 흐름을 소개하고 있습니다. 그 외에도, 플레이버 조건부 자산 번들링, Dart에서 Firebase의 Vertex AI 미리보기, 개선된 DevTools 등 다양한 업데이트가 있어 여러분의 개발 생활을 더욱 편리하게 만들어 줄 것입니다.

지난 업데이트 이후 몇 달 만에, Flutter 커뮤니티로부터 인상적인 1595개의 풀 리퀘스트가 병합되었으며, 37명의 새로운 커뮤니티 멤버가 처음으로 Flutter에 기여했습니다!

그래서 지금 바로 확인해 보세요. Flutter 커뮤니티가 이번 최신 릴리스에 기여한 모든 새로운 기능과 개선 사항을 발견해 보세요!


# WebAssembly




플러터 3.22가 출시되었습니다. Wasm은 이제 안정 채널에서 사용할 수 있어서 상당한 성능 향상을 제공합니다. 저희는 M1 맥북에서 Chrome을 사용하여 내부 벤치마크를 수행한 결과, Wonderous 앱의 프레임 렌더링 시간이 평균 2배 이상, 최악의 경우에는 3배까지 개선되었습니다.

![이미지](/assets/img/2024-05-15-WhatsnewinFlutter322_0.png)

이러한 향상 사항은 애니메이션과 풍부한 전환 효과가 있는 앱에 중요하며, 부드러운 프레임 속도를 유지하는 데 필수적입니다. Wasm은 성능 병목 현상을 줄이고, 이로 인해 부드러운 애니메이션과 전환 효과를 구현하는 데 도움이 됩니다. 플러터 웹 앱에서 Wasm을 사용하려면 Dart Wasm 문서와 Flutter Wasm 문서를 확인해보세요. 자세한 내용은 Google I/O 블로그의 Flutter 공지를 참조하세요.

# 엔진



Flutter 3.22에서는 Flutter 애플리케이션을 구동하는 렌더링 엔진 Impeller에 중요한 업데이트가 있습니다. 주요 업데이트 내용으로는 안드로이드에서 Vulkan 백엔드가 완료되어 그래픽이 더 부드럽고 성능이 향상되었으며, 흐릿한 효과 및 복잡한 경로 렌더링을 위한 계속되는 최적화와 Impeller를 테스트하기 위한 새로운 실험적 API가 포함됩니다. 저희의 로드맵에 따라 Impeller의 품질과 성능을 향상시키기 위해 iOS 이주를 완료하고 Android 지원을 확대하는 것을 포함하여 노력할 것입니다.

## Impeller

## Vulkan 백엔드 안드로이드에서 기능 완료

이 릴리스에서 Impeller의 안드로이드용 Vulkan 백엔드가 기능 완료되었습니다. 특히 이전 몇 달 동안 팀은 빠른 고급 블렌드의 구현, FragmentProgram API를 사용한 사용자 지정 프래그먼트 쉐이더 지원, PlatformView 지원 (다소 API 이주가 필요함) 및 모든 흐림 스타일을 완전히 구현하는 데 열심히 일했습니다.



## 안드로이드 미리보기

3.19 안정 버전에서는 Impeller의 OpenGL 백엔드 개선을 통해 안드로이드 기기에서 Vulkan 지원 유무에 상관없이 Impeller를 시도해 볼 수 있도록 사용자를 초대했습니다. 지난 몇 달 동안 OpenGL 백엔드의 성능을 평가하고 Vulkan 백엔드의 남은 작업을 추정한 결과, Vulkan 백엔드를 먼저 제품으로 출시할 것으로 결정했습니다.

Impeller는 셰이더 컴파일레이션 지연 문제를 해결합니다. 또한 벤치마크 결과, 평균적으로 레거시 렌더러보다 90백분위 및 99백분위 프레임 시간에서 더 뛰어난 성능을 보여줍니다. 따라서 안드로이드에서의 Vulkan 백엔드 성능은 받을 만하다고 믿습니다. 이번 릴리스(3.22)에서 Impeller를 선택하는 앱은 가능한 경우 Vulkan 백엔드를 사용합니다. 향후 릴리스에서는 이것이 기본 설정이 될 것입니다. Impeller를 선택하는 앱이 Vulkan을 지원하지 않는 기기에서 실행될 때, Flutter는 자동으로 OpenGL ES와 Skia를 사용하도록 자연스럽게 대체합니다. 여러분은 별도의 조치를 취할 필요가 없습니다. 미래에 우리가 OpenGL ES Impeller 백엔드를 제품으로 출시할 준비가 되었을 때, 이 대체 방법 또한 Impeller를 사용할 것입니다.

이 3.22 안정 주기를 통해 안드로이드에서의 Impeller 미리보기가 계속될 동안, Flutter 개발자들이 최신 안정 버전으로 업그레이드하고 Impeller를 활성화할 때 발견된 어떤 결점에 대해 이슈를 제기하기를 요청합니다. 이 단계에서의 피드백은 Impeller가 안드로이드에서 성공적이 되도록 보장하고, 올해 후반 릴리스에서 확신을 가지고 기본 렌더러로 만들 수 있도록 하는 데 중요합니다. 안드로이드 하드웨어 생태계는 매우 다양합니다. 이에 따라 Impeller에 대한 가장 유익한 피드백은 문제가 발생한 특정 기기 및 안드로이드 버전에 대한 상세한 정보를 포함해야 합니다.



## 블러 성능 향상

iOS와 Android 모두 Impeller에서 Blur가 재구현되었습니다. 새로운 방식은 Skia의 것과 유사하며, 벤치마크에서 블러의 CPU 및 GPU 시간을 거의 절반으로 줄였습니다.

아래 차트는 iPhone 11 기기에서 경로학적 벤치마크에서 frame 래스터화 시간(ms)과 GPU frame 시간을 나타냅니다. Impeller의 blur를 재작성한 후, 배경 필터 블러의 CPU 및 GPU 비용이 거의 반으로 줄었습니다. 이런 개선은 일반적인 앱에서 나타나는 경우와 같이 병적인 상황에서 발생하는 경우에도 적용됩니다.

![image](/assets/img/2024-05-15-WhatsnewinFlutter322_1.png)



## 스텐실 후 커버

iOS 및 Android에서의 임펠러는 OpenGL 레드북의 "스텐실 버퍼를 사용하여 채우고 오목한 다각형 그리기" 장에서 설명된 스텐실-커버 방식을 기반으로 한 새로운 렌더링 전략으로 전환했습니다. 팀 구성원들은 이 기술이 Flutter에 적용된다는 점에 대해 GitHub 이슈 #123671에서 더 많이 논의했습니다.

이 접근 방식은 래스터 스레드가 예를 들어 SVG 및 Lottie 애니메이션과 같은 복잡한 경로의 테셀레이션을 CPU에서 계산하는 데 너무 많은 시간을 소비하던 문제를 해결합니다. 변경 후, 복잡한 경로가 포함된 프레임의 총 프레임 시간(컴퓨터의 UI 스레드 + 래스터 스레드 + GPU 작업)이 상당히 낮아집니다. 사용자는 Lottie 애니메이션 및 기타 복잡한 경로가 더 부드럽게 렌더링되고, CPU 사용률이 낮아지고 약간 높은 GPU 사용률을 확인할 수 있을 것입니다.

![이미지](https://miro.medium.com/v2/resize:fit:1400/1*1lCd7dBwJ0ab_sieDlQNFw.gif)



이러한 개선 사항에 만족해하면서도, 할 일이 더 많이 남아 있습니다. 다른 기회들 중에, CPU 프로파일에서 polyline 생성이 여전히 중요한 역할을 하는 것을 인지하고 있으며, 이 작업을 GPU로 전환하는 것에 대해 조사할 계획입니다.

## 새로운 API

아직 실험적이지만, flutter test는 이제 --enable-impeller 플래그를 허용하며, Vulkan 백엔드를 이용하여 Impeller를 사용합니다.

# 프레임워크



## 위젯 상태 속성

MaterialState는 Material 라이브러리 외부로 이동되었으며 WidgetState로 이름이 변경되어 Cupertino, 기본 Flutter 프레임워크 및 패키지 작성자에게 이용 가능하게 되었습니다. 새로운 WidgetState로의 이관에 대한 자세한 정보는 마이그레이션 가이드를 참조해주세요.

## 동적 뷰 크기 조정

동적 뷰 크기 조정의 개선으로, 반응형 레이아웃을 구축하는 개발자들이 더 나은 UI 적응성을 확보할 수 있게 되었으며, 다양한 디바이스 화면에 대해 더 나은 UI 적응성을 제공합니다.



## 개선된 양식 유효성 검사

플러터 커뮤니티 구성원인 SharbelOkzan의 기여 덕분에, 플러터 3.22 버전부터는 더 유연한 양식 유효성 검사 방법이 제공되어 개발자들이 더 견고한 사용자 입력 처리를 만들 수 있게 되었습니다. 이로써 사용성과 보안이 모두 강화되었습니다.

## 2D API의 공변형

2D 그래픽 API에서 형 변환 필요성을 줄임으로써 개발 워크플로우를 간소화하고, 게임 및 복잡한 애니메이션에 중요한 성능을 향상시킬 수 있습니다.



## 플레이버별 자산 번들링

플레이버 기능을 사용하는 개발자들은 이제 특정 플레이버를 빌드할 때만 특정 자산이 번들되도록 구성할 수 있습니다. 자세한 정보는 '플레이버에 기반한 조건부 자산 번들링'을 확인해보세요.

## Dart 패키지를 사용한 자산 변환

사용자들은 이제 Dart 패키지를 구성하여 앱의 자산이 번들될 때 변환되도록 설정할 수 있습니다. 자세한 정보는 '빌드 시간에 자산 변환하기'를 확인해보세요.



# 안드로이드

## 딥 링크

딥 링크를 사용하면 플러터 앱의 사용자 경험을 크게 향상시킬 수 있습니다. 사용자를 앱 내의 특정 콘텐츠로 원활하게 안내하는 바로 가기 역할을 하므로, 참여율을 높이고 판매를 촉진할 수 있습니다. iOS용 Universal Links 및 Android용 App Links를 사용하면 보안 및 사용자 친화성이 우수하다는 점에서 매우 권장되지만, 설정하는 데는 조금 까다로울 수 있습니다.

최신 플러터 안정 버전에서는 DevTools 내에 안드로이드 앱의 웹 구성을 확인하는 딥 링크 유효성 검사 도구를 소개했습니다. 이 버전에서는 Android 매니페스트 파일 내 설정을 확인하는 데 도움이 되는 새로운 기능 세트를 추가했습니다.



이 도구를 사용하는 방법에 대한 자세한 정보는 딥링크 유효성을 확인하십시오.

## 예측 제스처 뒤로가기

플러터는 이제 Android의 예상 제스처 뒤로가기 기능에 대한 더 많은 지원을 추가했습니다. 사용자는 백 제스처 중에 이전 경로나 이전 앱을 엿볼 수 있습니다. 이 기능은 아직 Android 기기에서 기능 플래그 뒤에 숨겨져 있지만, GitHub에서 직접 시도해 볼 수 있는 세부 정보를 찾을 수 있습니다.

## Flutter 도구는 Gradle, AGP, Java 및 Kotlin에 대한 버전 요구 사항을 강제합니다.



이번 릴리스에서 Flutter 도구는 Gradle, Android Gradle 플러그인 (AGP), Java 및 Kotlin의 지원 버전에 대한 정책을 강화합니다. 초기에는 도구가 경고만 제공합니다.

현재 지원되는 버전 범위는 다음과 같습니다:

- Gradle — Fully supported 7.0.2 to current, warn otherwise
- AGP — Fully supported 7.0.0 to current, warn otherwise
- Java — Fully supported Java 11 to current, warn otherwise
- Kotlin — Fully supported 1.5.0 to current, warn otherwise

다음 주요 릴리스에서는 이러한 경고가 오류로 전환되며, --android-skip-build-dependency-validation 플래그로 재정의할 수 있습니다. 보다 일반적으로 말하면, 도구는 이러한 종속성 버전의 완전한 지원을 중단하기 전에 적어도 한 릴리스에 대한 경고를 제공합니다.



이 정책은 관련된 디자인 사양에서 논의되었습니다. 의견과 피드백은 언제나 환영합니다.

## 안드로이드에서 Gradle 빌드 스크립트에서 Gradle Kotlin DSL 사용 지원

Gradle Kotlin DSL은 이제 플러터에서 지원되며 전통적인 Gradle Groovy DSL 대안을 제공합니다. 이 지원을 통해 더 나은 코드 편집 환경을 제공하여 자동 완성, 문서 빠른 액세스, 소스 탐색 및 컨텍스트 인식 리팩터링이 가능합니다.

이 초기 지원은 GitHub 사용자 bartekpacia가 공헌했습니다. 개발자들은 이제 Gradle 빌드 스크립트를 코틀린으로 다시 작성하여 이러한 혜택을 누릴 수 있지만, 플러터 도구는 아직 flutter create를 사용할 때 코틀린을 그루비 대신 선택할 수는 없습니다.



자세한 내용은 bartekpacia가 제출한 PR 140744을 확인해보세요.

## 플랫폼 뷰 개선 사항

플러터 앱 개발자 여러분, 주목하세요! Flutter를 사용하여 맵, 웹 뷰 또는 특정 UI 요소와 같은 네이티브 Android 구성 요소에 의존하는 앱을 개발 중이라면 중요한 소식이 있습니다.

Android 14에서 발생하는 버그로 인해 이전 버전의 Flutter로 빌드된 앱은 이 새로운 Android 버전을 실행하는 기기에서 제대로 작동하지 않을 수 있습니다.



Flutter 3.22은이 문제를 해결하고 안드로이드 앱의 네이티브 구성 요소의 전반적인 성능을 향상시킵니다. 따라서 모든 안드로이드 기기에서 앱이 원활하게 실행되도록하려면 Flutter 3.22로 앱을 다시 빌드하고 릴리스하십시오.

이 업데이트에는 안드로이드에서 플랫폼 뷰를 더 신뢰할 수 있고 성능이 더 향상되도록하는 뒷면 개선사항도 포함되어 있습니다.

## KitKat에 대한 지원 종료

Flutter의 최소 지원 안드로이드 버전은 이제 Lollipop (API 21)입니다. Flutter의 3.22 안정 릴리스부터는 Android KitKat (API 19)를 실행하는 기기에서 더 이상 작동하지 않습니다. 자세한 내용은 당사의 폐기 안내서를 참조하십시오.



# iOS

## 플랫폼 뷰 성능

우리는 iOS에서 플랫폼 뷰 성능이 많은 Flutter 개발자들에게 골칫거리였음을 이해합니다. 이는 특히 플랫폼 뷰를 사용할 때 스크롤 뷰 내에서 특히 두드러졌습니다.

최근 업데이트는 이러한 우려사항에 직접 대응하여, 특히 기사 내에서 여러 인라인 광고를 포함하는 시나리오에서 상당한 향상을 이끌어냈습니다. 우리의 벤치마크에서 주요 향상점은 다음과 같습니다:



- GPU 사용량 감소: GPU 사용량이 50% 감소하여 전력 소비가 줄어들고 사용자 경험이 원활해질 수 있습니다.
- 프레임 렌더링 개선: 평균 프레임 렌더링 시간이 1.66ms(33%) 감소했습니다.
- 지연 최소화: 최악의 경우 프레임 렌더링 시간이 3.8ms(21%) 줄었습니다.

이전에 여러 플랫폼 뷰(광고, 지도 등)를 스크롤 뷰 내에서 사용할 때 성능에 도전이 있었다면, 이러한 최적화로 스르르르륵 하고 더 반응이 빠른 스크롤링 경험을 기대할 수 있습니다. 한 번 시도해보고 어떻게 생각하는지 알려주세요.

<img src="/assets/img/2024-05-15-WhatsnewinFlutter322_2.png" />

<img src="/assets/img/2024-05-15-WhatsnewinFlutter322_3.png" />



# 생태계

## Vertex AI for Firebase Dart SDK 미리보기 릴리스

Vertex AI for Firebase 제품이 공개 미리보기로 출시되었으며 Dart SDK를 포함하고 있습니다. 이를 통해 Gemini API를 활용하여 Dart 또는 Flutter 앱에 대한 생성적 AI 기능을 구축할 수 있습니다. 제작, 성능 및 기업 규모를 염두에 두었습니다. SDK는 Firebase App Check과 통합되어 API 호출을 보호하고 청구 사기, 피싱 및 앱 가장자리와 같은 심각한 위협으로부터 백엔드 인프라를 안전하게 보호합니다. Dart를 위한 시작하기 페이지로 이동하여 프로모션 코드를 사용하여 무료로 사용해 보세요.

![](/assets/img/2024-05-15-WhatsnewinFlutter322_4.png)



Google AI Dart SDK은 여전히 사용 가능하며, 프로토타입에 권장됩니다. Google AI는 무료로 액세스할 수 있으며(한계가 있을 수 있음), 과금 방식도 있습니다. Google AI Dart SDK로 프로토타입을 진행하고 있으며, Firebase용 Vertex AI로 마이그레이션 준비가 된 경우, 마이그레이션 가이드를 확인해보세요.

## DevTools 업데이트

우리는 Dart와 Flutter용 성능 및 디버깅 도구 모음인 DevTools를 계속 개선하고 있습니다. 이 릴리스에는 성능 향상, 일반적인 더 완만함, CPU 샘플을 타임란에 포함시키는 새로운 기능, 고급 필터링, 그리고 메모리 스냅샷 가져오기 및 내보내기 지원이 포함되어 있습니다.

기타 주목할만한 개선점은 DevTools 확장 패키지와 DevTools 앱 공유 패키지에 포함되어 있으며, DevTools 확장 개발자를 지원합니다. 우리는 새로운 Dart Tooling Daemon(DTD)에 확장을 연결할 수 있는 지원을 추가했습니다. 이를 통해 DevTools 확장은 IDE와 같은 다른 DTD 클라이언트가 등록하는 공개 메서드에 액세스할 수 있으며, 개발 프로젝트와 상호 작용하기 위한 최소 파일 시스템 API에도 액세스할 수 있습니다.



플러터 3.22에 포함된 모든 업데이트에 대해 알아보려면 DevTools 2.32.0, 2.33.0 및 2.34.1의 릴리스 노트를 확인해보세요.

## 플러터용 Google Mobile Ads SDK

Flutter 앱을 광고로 수익화하고 있는 경우, 좋은 소식이 있어요! Google Mobile Ads for Flutter가 버전 5.0.1로 주요 업데이트를 배포했습니다.

사용자 메시지 플랫폼 (UMP) SDK 지원 강화: 이 업데이트는 안드로이드 UMP SDK 버전 2.2.0 및 iOS UMP SDK 버전 2.4.0의 최신 API를 지원합니다. UMP SDK는 개인정보 규정을 준수하는 데 중요하며, 사용자 동의를 얻는 것을 더 쉽게 할 수 있습니다. 이 새로운 버전은 동의 수집 프로세스를 간소화하는 몇 가지 새로운 API를 소개합니다.



확장된 중재 파트너: 인기 있는 광고 파트너들과의 통합을 통해 여러분의 광고 수익 창출 가능성을 확장하였습니다. 이제 Unity, Meta, AppLovin, Iron Source, Mintegral, Pangle, DT Exchange, InMobi 및 Liftoff와의 통합을 통해 앱 수익을 극대화할 수 있습니다. 확장된 중재 옵션과 간소화된 구현으로 앱 수익을 극대화하세요.

새로운 기능을 플러터 앱에서 시도해 보고, 어떤 중재 파트너를 지원했으면 하는지 알려주시기 바랍니다. 여러분의 피드백은 Google Mobile Ads SDK for Flutter를 개선하는 데 귀중합니다.

# 변경 사항 및 폐기 사항

## ColorScheme.fromSeed



만약 ColorScheme.fromSeed에서 사용된 seedColor의 색감 값이 높다면, 생성된 ColorScheme은 생기발랄함이 부족한 파스텔 팔레트를 제공할 수 있습니다. 원하는 시드 색상의 느낌과 가장 일치하도록 출력 색상을 보장하려면 dynamicSchemeVariant를 DynamicSchemeVariant.fidelity 또는 DynamicSchemeVariant.content로 설정하는 것을 고려해보세요. 이러한 옵션은 원래 시드 색상과 더 가깝게 맞는 팔레트를 생성합니다.

## v1 Android 임베딩 제거

안드로이드 임베딩의 버전 1 삭제가 진행 중입니다. 대부분의 앱에는 아무런 영향을 미치지 않을 것으로 예상됩니다.

- 버전 2가 많은 해 default 였습니다.
- Flutter 도구는 이미 --ignore-deprecation 플래그로 명시적으로 무시하지 않은 한 버전 1 앱을 빌드하는 것을 막았을 것입니다.



이 릴리스로 인해 v1 앱의 Flutter 도구 지원이 완전히 중단되었습니다. 더 이상 재정의할 수 없습니다.

플러그인 작성자 여러분, 알려드립니다: 초기에 v1 안드로이드 삽입이 폐기되었을 때 플러그인 작성자를 위해 이주 문서가 작성되었습니다. 해당 문서는 https://docs.flutter.dev/release/breaking-changes/plugin-api-migration에서 확인할 수 있습니다. 이주 과정에서 v1 삽입을 사용하는 앱을 지원하는 것이 권장되었으며, 이를 위해 *Plugin.java에 다음과 같은 시그니처를 가진 메소드를 포함하는 것이 추천되었습니다.

public static void registerWith(@NonNull io.flutter.plugin.common.PluginRegistry.Registrar registrar)

다음 릴리스에서 v1 Android 삽입을 완전히 삭제할 계획입니다. 그 시점에 이 시그니처를 포함하는 플러그인은 더 이상 컴파일되지 않을 것입니다(이는 v1 android 삽입에서의 타입을 참조하고 있기 때문입니다).



현재 이 표는 아무 목적도 없습니다. 왜냐하면 이 릴리스로 인해 v1 임베딩을 사용하는 앱들이 작동하지 않게 되었습니다. 우리는 플러그인 저자들에게 가능한 빨리 업데이트된 플러그인 버전을 릴리스하여 v1 코드를 제거하기를 권장합니다. 이렇게 하면 향후 Flutter 버전에서의 문제를 피할 수 있습니다. 예를 들어, Flutter 팀이 유지보수하는 플러그인들을 제거한 PR 6494를 확인해보세요.

## 3.22에서 제거된 사용 폐기사항들

이번 릴리스에서의 중단 변경 사항에는 v3.19 이후 만료된 사용 폐기 API가 포함되어 있습니다. 영향을 받는 모든 API와 추가적인 맥락 및 이주 지침은 이번 릴리스의 폐기 안내서에서 확인할 수 있습니다. 이 중 많은 것들은 Flutter fix에 의해 지원되며, IDE에서 빠른 수정도 가능합니다. 대량 수정은 dart fix 커맨드 라인 도구를 사용하여 평가하고 적용할 수 있습니다.

이러한 중단 변경 사항을 식별하는 데 도움을 주신 커뮤니티에게 항상 감사드립니다. 자세한 내용은 Flutter의 중단 변경 정책을 확인해보세요.



# 결론

플러터의 성공의 핵심은 여러분 - 우리 놀라운 커뮤니티입니다. 여러분의 끊임없는 기여와 열정이 없었다면 이번 릴리즈는 불가능했을 것입니다. 우리 마음속 깊은 곳에서 감사드립니다.

Flutter 3.22를 탐험할 준비가 되셨나요? 전체 릴리스 노트와 변경 로그를 확인하고, 터미널을 켜고 flutter upgrade를 실행해보세요. 여러분이 어떤 것을 만들어내는지 기대됩니다!