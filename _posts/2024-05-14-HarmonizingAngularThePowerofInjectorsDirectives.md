---
title: "앵귤러의 조화 인젝터와 디렉티브의 힘"
description: ""
coverImage: "/assets/img/2024-05-14-HarmonizingAngularThePowerofInjectorsDirectives_0.png"
date: 2024-05-14 13:13
ogImage: 
  url: /assets/img/2024-05-14-HarmonizingAngularThePowerofInjectorsDirectives_0.png
tag: Tech
originalTitle: "Harmonizing Angular: The Power of Injectors + Directives"
link: "https://medium.com/gitconnected/harmonizing-angular-the-power-of-injectors-directives-d051fcb1007b"
---


앵귤러는 여러 해 동안 크게 발전해 왔어요. 불과 10년 만에 v2부터 v17로 왔지요! 이 기간 동안 앵귤러에 많은 변화가 있었지만, 핵심 개념과 철학은 동일하게 유지되었어요. 우리는 이 중요한 앵귤러 컴포넌트 두 가지를 사용하여 강력한 것을 만들어보려고 해요.

## 샘플 애플리케이션

예시로 파일 업로드 컴포넌트를 만들어볼 거예요. 이 컴포넌트는 사용자가 로컬 기기에서 파일을 애플리케이션으로 업로드할 수 있도록 하는 기능을 맡을 거에요. 업로드되는 파일의 최대 크기를 제한하고, 이를 사용자 정의할 수 있어야 해요. 이는 Input 데코레이터 패턴을 사용하여 쉽게 구현할 수 있어요.

이 구현은 업로드된 파일 크기가 허용된 크기보다 큰지 확인하고, 그에 적절하게 경고를 보여줍니다.



보시는 대로 파일 업로드 한도를 컴포넌트의 입력으로 가져오고 있습니다. 이 컴포넌트의 모든 소비자는 요구 사항에 따라 이를 입력으로 전달할 수 있습니다.

이 방법은 작동하지만 조금 번거로울 수 있습니다. 컴포넌트를 사용할 때마다 파일 크기 제한을 전달해야 합니다. 실제로 이러한 제한은 대부분 응용 프로그램/라이브러리 또는 있는 모듈에 따라 달라집니다. 예를 들어, 모든 고객을 대상으로 하는 파일 업로드는 5MB로 제한되어야 하지만 모든 관리자 구성 요소는 최대 10MB까지 업로드할 수 있어야 합니다. 관리자 구성 요소는 원칙적으로 항상 10MB로 제한되어야 한다는 것을 알고 있지만, 관리자 페이지에서 컴포넌트를 사용할 때마다 이 데이터를 입력으로 전달해야합니다.

## Injector 패턴

여기서 Angular 인젝터가 유용하게 사용됩니다. Injector 패턴을 사용하여이 컴포넌트를 다시 작성해 봅시다.



우리는 InjectionToken을 만들고 기본값으로 7MB를 제공했습니다. 그런 다음 새로운 inject 기능 덕분에 유틸 메서드를 사용하여 이 토큰을 컴포넌트에서 소비합니다.

기본적으로 이 컴포넌트를 사용하는 모든 곳에서 업로드 제한으로 7MB가 설정될 것입니다.

이전에 언급했듯이, 모든 관리자 컴포넌트는 10MB 제한이어야 합니다. 이제 단순히 관리자 모듈(또는 상위/라우트 수준 컴포넌트)로 이동할 수 있습니다.

고객 모듈의 경우,



요약하자면 우리는 Angular injectors를 사용하여 응용 프로그램에서 데이터 공급자를 효과적으로 사용자 정의했습니다. 이것은 더 결정론적이며 데이터가 더 높은 수준에서 제공되기 때문에 오류 발생 가능성이 줄어듭니다.

하지만, 같은 구성 요소에서 앱 파일 업로드의 두 인스턴스를 각각 다른 파일 크기 제한을 가지고 싶다면 어떻게 해야 할까요? Angular에서 주입기 트리의 가장 낮은 수준은 컴포넌트 데코레이터이며 여기서 주입기를 제공할 수 있는 곳입니다. 템플릿 수준에서 주입기를 제공하는 것은 불가능합니다.

## 디렉티브로 승리!

Angular에서 디렉티브는 템플릿의 요소에 새로운 동작을 추가하거나 기존 동작을 수정할 수 있는 클래스입니다. 디렉티브는 템플릿이 없는 컴포넌트로 생각할 수 있습니다. 즉, 우리는 디렉티브에 여러 가지를 제공할 수 있고 디렉티브가 템플릿의 일부에 적용될 수 있기 때문에 템플릿 수준에서 데이터를 제공하는 데 사용할 수 있습니다!



본문을 요약하면 템플릿에 데이터 제공자로서 지시문을 사용할 수 있다는 것을 알 수 있습니다. 이제 이를 사용하여 동일한 컴포넌트에 여러 인젝터를 제공하여 인젝터를 통해 동일한 컴포넌트에서 두 가지 다른 파일 크기를 가질 수 있습니다.

우리는 각각 10MB와 2MB용 데이터 제공자로 두 개의 지시문을 생성할 것입니다.

이제 간단히 컴포넌트에 이를 적용해 봅시다.

## 결론



Angular에서는 지시문을 데이터 제공자로 사용할 수 있어요. 지시문과 인젝터를 결합하여 모듈식이고 유연한 강력한 컴포넌트 디자인 패턴을 만들 수 있어요.

샘플 애플리케이션은 여기에서 확인할 수 있어요 - https://github.com/BharathRavi27/angular-injector-decorator

Angular에서 더 많은 디자인 패턴을 배우고 싶나요? 아래의 이전 기사를 확인해보세요!