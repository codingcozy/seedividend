(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{442:function(t,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/edit/[slug]",function(){return n(6715)}])},6715:function(t,i,n){"use strict";n.r(i),n.d(i,{__N_SSG:function(){return u},default:function(){return c}});var e=n(5893),o=n(7294),r=n(1163),l=n(2862),a=n(7735),s=n(2670),u=!0;function c(t){let{post:i,categoryList:n}=t,{isAuthorized:u,isLoading:c}=(0,a.Z)(),d=(0,r.useRouter)(),[g,h]=(0,o.useState)(!1),f=async t=>{h(!0);try{let n=window.confirm("포스트를 수정하시겠습니까?");if(!n){h(!1);return}let e={...t,slug:i.slug,tags:"",date:i.date},o=new AbortController,r=setTimeout(()=>o.abort(),3e4),l=await fetch("http://localhost:3001/api/update-post?slug=".concat(i.slug),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:o.signal});if(clearTimeout(r),!l.ok){let t=await l.json();throw Error(t.message||"포스트 수정에 실패했습니다.")}alert("포스트가 성공적으로 수정되었습니다."),d.push("/admin")}catch(t){throw console.error("Error updating post:",t),t}finally{h(!1)}};return c?(0,e.jsx)("div",{children:"로딩 중..."}):u?d.isFallback?(0,e.jsx)("div",{children:"포스트를 불러오는 중..."}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Z,{type:"home"}),(0,e.jsx)(s.Z,{initialTitle:(null==i?void 0:i.title)||"",initialContent:(null==i?void 0:i.content)||"",initialCategory:(null==i?void 0:i.category)||n[0]||"",initialDescription:(null==i?void 0:i.description)||"",initialCoverImage:(null==i?void 0:i.coverImage)||"",categoryList:n,onSubmit:f,submitButtonText:"수정 완료",isSubmitting:g})]}):(0,e.jsx)("div",{children:"접근 권한이 없습니다"})}}},function(t){t.O(0,[564,643,829,945,774,888,179],function(){return t(t.s=442)}),_N_E=t.O()}]);
//# sourceMappingURL=[slug]-d4ec7f3cb49ef22b.js.map