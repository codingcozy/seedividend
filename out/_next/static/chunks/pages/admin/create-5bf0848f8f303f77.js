(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{2497:function(t,i,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/create",function(){return e(396)}])},396:function(t,i,e){"use strict";e.r(i),e.d(i,{__N_SSG:function(){return l},default:function(){return u}});var n=e(5893),r=e(7294),a=e(1163),o=e(2862),s=e(7735),c=e(2670),l=!0;function u(t){let{categoryList:i}=t,e=(0,a.useRouter)(),{isAuthorized:l,isLoading:u}=(0,s.Z)(),[h,p]=(0,r.useState)(!1),f=async t=>{p(!0);try{let i=t.title.toLowerCase().replace(/[^a-zA-Z0-9가-힣\s]/gi,"").replace(/\s+/g,"-"),n={...t,slug:i,tags:t.tags.split(" ").filter(t=>t.startsWith("#")),date:new Date().toISOString()},r=await fetch("http://localhost:3001/api/create-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){let t=await r.json();throw Error(t.message||"포스트 생성에 실패했습니다.")}alert("포스트가 성공적으로 생성되었습니다."),e.push("/admin")}catch(t){throw console.error("Error creating post:",t),t}finally{p(!1)}};return u?(0,n.jsx)("div",{children:"로딩 중..."}):l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{type:"home"}),(0,n.jsx)(c.Z,{initialTitle:"",initialContent:"",initialCategory:i[0]||"",initialDescription:"",initialCoverImage:"",initialTags:"",categoryList:i,onSubmit:f,submitButtonText:"완료",isSubmitting:h})]}):(0,n.jsx)("div",{children:"접근 권한이 없습니다"})}}},function(t){t.O(0,[564,643,829,945,774,888,179],function(){return t(t.s=2497)}),_N_E=t.O()}]);
//# sourceMappingURL=create-5bf0848f8f303f77.js.map