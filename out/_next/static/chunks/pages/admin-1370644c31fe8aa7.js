(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(7051)}])},7051:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return f},default:function(){return g}});var _=a(5893),n=a(1163),i=a(6853),s=a(3511),l=a.n(s),o=a(7166),c=a.n(o),r=a(2862),d=a(4696),m=a(7294),p=a(1664),h=a.n(p);let u=c().bind(l());var f=!0;function g(e){let{allPosts:t,categoryList:a}=e,s=(0,n.useRouter)();d.px;let[l,o]=(0,m.useState)([]),[c,p]=(0,m.useState)([]),[f,g]=(0,m.useState)(t),[b,x]=(0,m.useState)(!1),[j,w]=(0,m.useState)(!1);(0,m.useEffect)(()=>{s.replace("/")},[s]);let N=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},k=e=>{l.includes(e)?o(l.filter(t=>t!==e)):o([...l,e])},v=()=>{l.length===f.length?o([]):o(f.map(e=>e.slug))},y=async e=>{if(window.confirm("정말로 이 포스트를 삭제하시겠습니까?"))try{p(t=>[...t,e]);let t=await fetch("http://localhost:3001/api/delete-post?slug=".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to delete post")}let a=await t.json();console.log("Delete result:",a),g(f.filter(t=>t.slug!==e)),l.includes(e)&&o(l.filter(t=>t!==e))}catch(e){console.error("Error deleting post:",e),alert("포스트 삭제 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}finally{p(t=>t.filter(t=>t!==e))}},E=async()=>{if(0===l.length){alert("삭제할 포스트를 선택해주세요.");return}if(window.confirm("선택한 ".concat(l.length,"개의 포스트를 삭제하시겠습니까?"))){let e=0,t=0;for(let a of l)try{p(e=>[...e,a]);let t=await fetch("http://localhost:3001/api/delete-post?slug=".concat(a),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete post");e++,p(e=>e.filter(e=>e!==a))}catch(e){t++,console.error("Error deleting post ".concat(a,":"),e),p(e=>e.filter(e=>e!==a))}g(f.filter(e=>!l.includes(e.slug))),o([]),alert("".concat(e,"개 포스트가 삭제되었습니다. ").concat(t>0?"".concat(t,"개 포스트 삭제 실패."):""))}},D=async()=>{if(window.confirm("블로그를 발행하시겠습니까?"))try{x(!0);let e=await fetch("http://localhost:3001/api/publish-post",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to publish blog")}let t=await e.json();alert("블로그가 성공적으로 발행되었습니다."),console.log("Publish result:",t)}catch(e){console.error("Error publishing blog:",e),alert("블로그 발행 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}finally{x(!1)}},S=e=>c.includes(e);return j?(0,_.jsx)(_.Fragment,{children:s.isFallback?" Loading…":(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.Z,{type:"home"}),(0,_.jsxs)("div",{className:u("container","-list"),children:[(0,_.jsx)(i.Z,{postList:f,categoryList:a}),(0,_.jsxs)("div",{className:u("inner"),children:[(0,_.jsxs)("div",{className:u("admin_actions"),children:[(0,_.jsx)("button",{onClick:D,className:u("publish_btn"),disabled:b,children:b?"발행 중...":"발행"}),(0,_.jsx)(h(),{href:"/admin/create",className:u("create_btn"),children:"새 포스트 작성"}),l.length>0&&(0,_.jsxs)("button",{className:u("bulk_delete_btn"),onClick:E,disabled:c.length>0,children:["선택한 포스트 삭제 (",l.length,")"]})]}),(0,_.jsxs)("div",{className:u("post_list_header"),children:[(0,_.jsx)("div",{className:u("checkbox_cell"),children:(0,_.jsx)("input",{type:"checkbox",checked:l.length===f.length&&f.length>0,onChange:v})}),(0,_.jsx)("div",{className:u("title_cell"),children:"제목"}),(0,_.jsx)("div",{className:u("actions_cell"),children:"작업"})]}),(0,_.jsx)("div",{className:u("post_list"),children:f.map(e=>(0,_.jsxs)("div",{className:u("post_item"),children:[(0,_.jsx)("div",{className:u("checkbox_cell"),children:(0,_.jsx)("input",{type:"checkbox",checked:l.includes(e.slug),onChange:()=>k(e.slug),disabled:S(e.slug)})}),(0,_.jsxs)("div",{className:u("title_cell"),children:[(0,_.jsx)(h(),{href:"/post/".concat(e.slug),className:u("title_link"),children:e.title}),(0,_.jsxs)("div",{className:u("post_meta"),children:[(0,_.jsx)("span",{className:u("post_category"),children:e.category}),(0,_.jsx)("span",{className:u("separator"),children:"•"}),(0,_.jsx)("span",{className:u("post_date"),children:N(e.date)})]})]}),(0,_.jsxs)("div",{className:u("actions_cell"),children:[(0,_.jsx)("button",{className:u("action_btn","edit"),onClick:()=>s.push("/admin/edit/".concat(e.slug)),disabled:S(e.slug),children:"수정"}),(0,_.jsx)("button",{className:u("action_btn","delete"),onClick:()=>y(e.slug),disabled:S(e.slug),children:S(e.slug)?"삭제 중...":"삭제"})]})]},e.slug))}),0===f.length&&(0,_.jsx)("div",{className:u("no_posts"),children:"포스트가 없습니다."})]})]})]})}):(0,_.jsx)("div",{children:"Checking authorization..."})}},3511:function(e){e.exports={post_content:"admin_post_content__ft_Pe",container:"admin_container__sDpJg","-list":"admin_-list__X_bjD",inner:"admin_inner__jN_HH",project_list:"admin_project_list__OuNd9",ifram_wrap:"admin_ifram_wrap__aU42G",iframe:"admin_iframe__NLBq7",meta:"admin_meta__L_vxo",date:"admin_date__la_NA",post_meta:"admin_post_meta__U_4y9",post_category:"admin_post_category__QaYM3",separator:"admin_separator__vyCi5",post_date:"admin_post_date__Xfs3v",profile_wrap:"admin_profile_wrap__EVWVv",profile_image_wrap:"admin_profile_image_wrap__XAo1n",textarea:"admin_textarea__bh9P0",info:"admin_info__2trzw",reading_time:"admin_reading_time__Xpbe3",post_title:"admin_post_title__J_A2i",tag_area:"admin_tag_area__FvAZM",tag:"admin_tag__9Px2L",view_badge:"admin_view_badge__utAag",post_list_header:"admin_post_list_header__Q_fWD",post_list:"admin_post_list__djSuc",post_item:"admin_post_item__pwAj9",checkbox_cell:"admin_checkbox_cell__HiARW",title_cell:"admin_title_cell___XYsg",title_link:"admin_title_link__DA8PM",actions_cell:"admin_actions_cell__4oldf",action_btn:"admin_action_btn__TA3_2",edit:"admin_edit__euMYR",delete:"admin_delete__r3NKS",view:"admin_view__M5heO",share:"admin_share__guXKz",admin_actions:"admin_admin_actions__yn899",create_btn:"admin_create_btn__R59bD",bulk_delete_btn:"admin_bulk_delete_btn__B0TwG",no_posts:"admin_no_posts__UxSux",admin_header:"admin_admin_header__yDNef",admin_title:"admin_admin_title__SejFK",back_btn:"admin_back_btn__gQ1ni",create_form_container:"admin_create_form_container__NpHZ8",post_form:"admin_post_form__eFezp",form_group:"admin_form_group__MYnWL",form_label:"admin_form_label__gd9oB",form_input:"admin_form_input__K3kki",form_select:"admin_form_select__X7DDt",form_textarea:"admin_form_textarea__6i55x",form_actions:"admin_form_actions__JHbQA",cancel_btn:"admin_cancel_btn__y2MwJ",submit_btn:"admin_submit_btn__weIP_",error_message:"admin_error_message__2Gg_u",publish_btn:"admin_publish_btn__0ypl_"}}},function(e){e.O(0,[564,526,774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);
//# sourceMappingURL=admin-1370644c31fe8aa7.js.map