(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(7051)}])},7735:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var _=a(7294),n=a(1163);function i(){let e=(0,n.useRouter)(),[t,a]=(0,_.useState)(!1),[i,s]=(0,_.useState)(!0);return(0,_.useEffect)(()=>{e.replace("/"),s(!1)},[e]),{isAuthorized:t,isLoading:i}}},7051:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return g},default:function(){return b}});var _=a(5893),n=a(1163),i=a(6853),s=a(3511),l=a.n(s),o=a(7166),c=a.n(o),r=a(2862),d=a(4696),m=a(7294),h=a(1664),p=a.n(h),u=a(7735);let f=c().bind(l());var g=!0;function b(e){let{allPosts:t,categoryList:a}=e,s=(0,n.useRouter)();d.px;let[l,o]=(0,m.useState)([]),[c,h]=(0,m.useState)([]),[g,b]=(0,m.useState)(t),[x,j]=(0,m.useState)(!1),{isAuthorized:w,isLoading:N}=(0,u.Z)(),k=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},v=e=>{l.includes(e)?o(l.filter(t=>t!==e)):o([...l,e])},y=()=>{l.length===g.length?o([]):o(g.map(e=>e.slug))},E=async e=>{if(window.confirm("정말로 이 포스트를 삭제하시겠습니까?"))try{h(t=>[...t,e]);let t=await fetch("http://localhost:3001/api/delete-post?slug=".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to delete post")}await t.json(),b(g.filter(t=>t.slug!==e)),l.includes(e)&&o(l.filter(t=>t!==e))}catch(e){console.error("Error deleting post:",e),alert("포스트 삭제 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}finally{h(t=>t.filter(t=>t!==e))}},S=async()=>{if(0===l.length){alert("삭제할 포스트를 선택해주세요.");return}if(window.confirm("선택한 ".concat(l.length,"개의 포스트를 삭제하시겠습니까?"))){let e=0,t=0;for(let a of l)try{h(e=>[...e,a]);let t=await fetch("http://localhost:3001/api/delete-post?slug=".concat(a),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete post");e++,h(e=>e.filter(e=>e!==a))}catch(e){t++,console.error("Error deleting post ".concat(a,":"),e),h(e=>e.filter(e=>e!==a))}b(g.filter(e=>!l.includes(e.slug))),o([]),alert("".concat(e,"개 포스트가 삭제되었습니다. ").concat(t>0?"".concat(t,"개 포스트 삭제 실패."):""))}},D=async()=>{if(window.confirm("블로그를 발행하시겠습니까?"))try{j(!0);let e=await fetch("http://localhost:3001/api/publish-post",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to publish blog")}await e.json(),alert("블로그가 성공적으로 발행되었습니다.")}catch(e){console.error("Error publishing blog:",e),alert("블로그 발행 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}finally{j(!1)}},A=e=>c.includes(e);return N?(0,_.jsx)("div",{children:"Loading..."}):w?(0,_.jsx)(_.Fragment,{children:s.isFallback?" Loading…":(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.Z,{type:"home"}),(0,_.jsxs)("div",{className:f("container","-list"),children:[(0,_.jsx)(i.Z,{postList:g,categoryList:a}),(0,_.jsxs)("div",{className:f("inner"),children:[(0,_.jsxs)("div",{className:f("admin_actions"),children:[(0,_.jsx)("button",{onClick:D,className:f("publish_btn"),disabled:x,children:x?"발행 중...":"발행"}),(0,_.jsx)(p(),{href:"/admin/create",className:f("create_btn"),children:"새 포스트 작성"}),l.length>0&&(0,_.jsxs)("button",{className:f("bulk_delete_btn"),onClick:S,disabled:c.length>0,children:["선택한 포스트 삭제 (",l.length,")"]})]}),(0,_.jsxs)("div",{className:f("post_list_header"),children:[(0,_.jsx)("div",{className:f("checkbox_cell"),children:(0,_.jsx)("input",{type:"checkbox",checked:l.length===g.length&&g.length>0,onChange:y})}),(0,_.jsx)("div",{className:f("title_cell"),children:"제목"}),(0,_.jsx)("div",{className:f("actions_cell"),children:"작업"})]}),(0,_.jsx)("div",{className:f("post_list"),children:g.map(e=>(0,_.jsxs)("div",{className:f("post_item"),children:[(0,_.jsx)("div",{className:f("checkbox_cell"),children:(0,_.jsx)("input",{type:"checkbox",checked:l.includes(e.slug),onChange:()=>v(e.slug),disabled:A(e.slug)})}),(0,_.jsxs)("div",{className:f("title_cell"),children:[(0,_.jsx)(p(),{href:"/post/".concat(e.slug),className:f("title_link"),children:e.title}),(0,_.jsxs)("div",{className:f("post_meta"),children:[(0,_.jsx)("span",{className:f("post_category"),children:d.En[e.category]}),(0,_.jsx)("span",{className:f("separator"),children:"•"}),(0,_.jsx)("span",{className:f("post_date"),children:k(e.date)})]})]}),(0,_.jsxs)("div",{className:f("actions_cell"),children:[(0,_.jsx)("button",{className:f("action_btn","edit"),onClick:()=>s.push("/admin/edit/".concat(e.slug)),disabled:A(e.slug),children:"수정"}),(0,_.jsx)("button",{className:f("action_btn","delete"),onClick:()=>E(e.slug),disabled:A(e.slug),children:A(e.slug)?"삭제 중...":"삭제"})]})]},e.slug))}),0===g.length&&(0,_.jsx)("div",{className:f("no_posts"),children:"포스트가 없습니다."})]})]})]})}):(0,_.jsx)("div",{children:"Unauthorized access"})}},3511:function(e){e.exports={post_content:"admin_post_content__ft_Pe",container:"admin_container__sDpJg","-list":"admin_-list__X_bjD",inner:"admin_inner__jN_HH",project_list:"admin_project_list__OuNd9",ifram_wrap:"admin_ifram_wrap__aU42G",iframe:"admin_iframe__NLBq7",meta:"admin_meta__L_vxo",date:"admin_date__la_NA",post_meta:"admin_post_meta__U_4y9",post_category:"admin_post_category__QaYM3",separator:"admin_separator__vyCi5",profile_wrap:"admin_profile_wrap__EVWVv",profile_image_wrap:"admin_profile_image_wrap__XAo1n",textarea:"admin_textarea__bh9P0",info:"admin_info__2trzw",reading_time:"admin_reading_time__Xpbe3",post_title:"admin_post_title__J_A2i",tag_area:"admin_tag_area__FvAZM",tag:"admin_tag__9Px2L",view_badge:"admin_view_badge__utAag",post_list_header:"admin_post_list_header__Q_fWD",post_list:"admin_post_list__djSuc",post_item:"admin_post_item__pwAj9",checkbox_cell:"admin_checkbox_cell__HiARW",title_cell:"admin_title_cell___XYsg",title_link:"admin_title_link__DA8PM",actions_cell:"admin_actions_cell__4oldf",action_btn:"admin_action_btn__TA3_2",edit:"admin_edit__euMYR",delete:"admin_delete__r3NKS",view:"admin_view__M5heO",share:"admin_share__guXKz",admin_actions:"admin_admin_actions__yn899",create_btn:"admin_create_btn__R59bD",bulk_delete_btn:"admin_bulk_delete_btn__B0TwG",no_posts:"admin_no_posts__UxSux",admin_header:"admin_admin_header__yDNef",admin_title:"admin_admin_title__SejFK",back_btn:"admin_back_btn__gQ1ni",create_form_container:"admin_create_form_container__NpHZ8",post_form:"admin_post_form__eFezp",form_group:"admin_form_group__MYnWL",form_label:"admin_form_label__gd9oB",form_input:"admin_form_input__K3kki",form_select:"admin_form_select__X7DDt",form_textarea:"admin_form_textarea__6i55x",form_actions:"admin_form_actions__JHbQA",cancel_btn:"admin_cancel_btn__y2MwJ",submit_btn:"admin_submit_btn__weIP_",error_message:"admin_error_message__2Gg_u",publish_btn:"admin_publish_btn__0ypl_"}}},function(e){e.O(0,[564,526,774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);
//# sourceMappingURL=admin-b348992ee2696f3b.js.map